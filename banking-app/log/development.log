  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (7000.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (157.2ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.2ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (10.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.4ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (15.6ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.7ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recepient_type" character varying NOT NULL, "recepient_id" bigint NOT NULL, "date_of_transaction" date DEFAULT '2021-10-23' NOT NULL, "duplicate" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recepient" ON "transactions" ("recepient_type", "recepient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-23 21:37:03.291647"], ["updated_at", "2021-10-23 21:37:03.291647"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/accounts" for ::1 at 2021-10-24 02:38:51 +0500
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}, "account"=>{}}
No template found for Api::V1::AccountsController#index, rendering head :no_content
Completed 204 No Content in 9ms (ActiveRecord: 1.5ms | Allocations: 3084)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 02:38:55 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}, "account"=>{}}
Can't verify CSRF token authenticity.
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 422 Unprocessable Entity in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms | Allocations: 940)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 02:42:19 +0500
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}, "account"=>{}}
Can't verify CSRF token authenticity.
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 422 Unprocessable Entity in 2ms (Views: 1.2ms | ActiveRecord: 1.5ms | Allocations: 1019)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 02:43:18 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}, "account"=>{}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 422 Unprocessable Entity in 4ms (Views: 1.6ms | ActiveRecord: 1.6ms | Allocations: 1895)


Started POST "/api/v1/banks" for ::1 at 2021-10-24 02:43:38 +0500
  
ActionController::RoutingError (No route matches [POST] "/api/v1/banks"):
  
Started POST "/api/v1/banks" for ::1 at 2021-10-24 02:43:40 +0500
  
ActionController::RoutingError (No route matches [POST] "/api/v1/banks"):
  
Started POST "/api/v1/banks" for ::1 at 2021-10-24 02:44:01 +0500
Processing by Api::V1::BanksController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
  [1m[36mBank Exists? (5.8ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) LIMIT $2[0m  [["name", "Habib Bank"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
  [1m[36mBank Create (0.9ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Habib Bank"], ["created_at", "2021-10-23 21:44:01.639461"], ["updated_at", "2021-10-23 21:44:01.639461"]]
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.55ms)
Completed 200 OK in 44ms (Views: 2.2ms | ActiveRecord: 29.5ms | Allocations: 6658)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 02:44:29 +0500
Error occurred while parsing request parameters.
Contents:

{
    "account": {
        "name": "Account 1"
        "bank_id": 1
    }
}
Processing by Api::V1::AccountsController#create as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 422 Unprocessable Entity in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms | Allocations: 451)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 02:44:36 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mAccount Create (23.5ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 1"], ["bank_id", 1], ["created_at", "2021-10-23 21:44:37.047088"], ["updated_at", "2021-10-23 21:44:37.047088"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Account (0.23ms)
Completed 200 OK in 85ms (Views: 1.0ms | ActiveRecord: 27.4ms | Allocations: 13719)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 02:46:50 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"account"=>{"sender_id"=>1, "sender_type"=>"Bank", "recepient_id"=>1, "recepient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}, "transaction"=>{}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 1ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 542)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 02:46:59 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recepient_id"=>1, "recepient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 11ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 4903)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 02:47:59 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recepient_id"=>1, "recepient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 422 Unprocessable Entity in 100ms (Views: 2.0ms | ActiveRecord: 10.0ms | Allocations: 26194)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (43.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (146.7ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.9ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.2ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "date_of_transaction" date DEFAULT '2021-10-23' NOT NULL, "duplicate" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-23 21:52:28.551313"], ["updated_at", "2021-10-23 21:52:28.551313"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/banks" for ::1 at 2021-10-24 02:53:02 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BanksController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
  [1m[36mBank Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) LIMIT $2[0m  [["name", "Habib Bank"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
  [1m[36mBank Create (0.6ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Habib Bank"], ["created_at", "2021-10-23 21:53:02.880063"], ["updated_at", "2021-10-23 21:53:02.880063"]]
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.28ms)
Completed 200 OK in 23ms (Views: 1.7ms | ActiveRecord: 9.4ms | Allocations: 8036)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 02:53:07 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mAccount Create (1.0ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 1"], ["bank_id", 1], ["created_at", "2021-10-23 21:53:07.196232"], ["updated_at", "2021-10-23 21:53:07.196232"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Account (0.21ms)
Completed 200 OK in 27ms (Views: 0.9ms | ActiveRecord: 6.0ms | Allocations: 9312)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 02:53:25 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recepient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
[31mUnpermitted parameter: :recepient_id[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 22ms (Views: 0.6ms | ActiveRecord: 3.4ms | Allocations: 9125)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 02:53:42 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 9ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 3842)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 02:54:31 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.6ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 422 Unprocessable Entity in 56ms (Views: 1.7ms | ActiveRecord: 10.2ms | Allocations: 22494)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 02:54:40 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 40ms (Views: 0.7ms | ActiveRecord: 8.5ms | Allocations: 17445)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 02:55:24 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 422 Unprocessable Entity in 47ms (Views: 0.7ms | ActiveRecord: 8.1ms | Allocations: 20136)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:00:49 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 98ms (Views: 0.8ms | ActiveRecord: 6.7ms | Allocations: 19130)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:00:57 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTransaction Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 21:59:57.865170' ) LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:114:in `check_duplicate'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:23:in `update_current_balance!'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mTransaction Create (1.0ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-23 22:00:57.883360"], ["updated_at", "2021-10-23 22:00:57.883360"]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (5.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.56ms)
Completed 200 OK in 77ms (Views: 11.3ms | ActiveRecord: 19.9ms | Allocations: 25453)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:01:04 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
No template found for Api::V1::TransactionsController#index, rendering head :no_content
Completed 204 No Content in 3ms (ActiveRecord: 0.0ms | Allocations: 1739)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:01:07 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
No template found for Api::V1::TransactionsController#index, rendering head :no_content
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 221)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:01:07 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
No template found for Api::V1::TransactionsController#index, rendering head :no_content
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 216)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:01:21 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/api/v1/transactions_controller.rb:10:in `index'
  [1m[36mBank Load (1.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:10:in `index'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:10:in `index'
No template found for Api::V1::TransactionsController#index, rendering head :no_content
Completed 204 No Content in 99972ms (ActiveRecord: 9.9ms | Allocations: 96156)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:03:05 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 422 Unprocessable Entity in 28504ms (Views: 1.4ms | ActiveRecord: 0.0ms | Allocations: 7430)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:03:37 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 422 Unprocessable Entity in 54835ms (Views: 1.6ms | ActiveRecord: 1.9ms | Allocations: 6391)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:08:11 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.7ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/application_controller.rb:14:in `message'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/application_controller.rb:14:in `message'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/application_controller.rb:14:in `message'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 422 Unprocessable Entity in 2592ms (Views: 2.0ms | ActiveRecord: 10.8ms | Allocations: 67584)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:08:42 +0500
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.8ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/models/concerns/orderable.rb:10:in `block (2 levels) in <module:Orderable>'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/models/concerns/orderable.rb:10:in `block (2 levels) in <module:Orderable>'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/models/concerns/orderable.rb:10:in `block (2 levels) in <module:Orderable>'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/application_controller.rb:14:in `message'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/application_controller.rb:14:in `message'
  [1m[36mCACHE Account Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/application_controller.rb:14:in `message'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/application_controller.rb:14:in `message'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/application_controller.rb:14:in `message'
  [1m[36mCACHE Account Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/application_controller.rb:14:in `message'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 422 Unprocessable Entity in 6039ms (Views: 1.8ms | ActiveRecord: 11.1ms | Allocations: 74398)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:09:05 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 422 Unprocessable Entity in 2006ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 3121)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:09:46 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
No template found for Api::V1::TransactionsController#index, rendering head :no_content
Completed 204 No Content in 7ms (ActiveRecord: 1.1ms | Allocations: 2581)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:10:12 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/api/v1/transactions_controller.rb:10:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:10:in `index'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:10:in `index'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/models/concerns/orderable.rb:10:in `block (2 levels) in <module:Orderable>'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/models/concerns/orderable.rb:10:in `block (2 levels) in <module:Orderable>'
  [1m[36mCACHE Account Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/models/concerns/orderable.rb:10:in `block (2 levels) in <module:Orderable>'
No template found for Api::V1::TransactionsController#index, rendering head :no_content
Completed 204 No Content in 41654ms (ActiveRecord: 10.8ms | Allocations: 23613)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:11:03 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/api/v1/transactions_controller.rb:10:in `index'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:10:in `index'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:10:in `index'
No template found for Api::V1::TransactionsController#index, rendering head :no_content
Completed 204 No Content in 16007ms (ActiveRecord: 1.2ms | Allocations: 8147)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:11:42 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.99ms)
Completed 200 OK in 47ms (Views: 36.8ms | ActiveRecord: 8.2ms | Allocations: 16430)


Started PUT "/api/v1/transactions/1" for ::1 at 2021-10-24 03:12:22 +0500
Processing by Api::V1::TransactionsController#update as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "id"=>"1"}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:35:in `set_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTransaction Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 22:11:22.340042' ) LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:114:in `check_duplicate'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:23:in `update_current_balance!'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mTransaction Update (0.4ms)[0m  [1m[33mUPDATE "transactions" SET "amount_cents" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["amount_cents", 150000], ["updated_at", "2021-10-23 22:12:22.349237"], ["id", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.43ms)
Completed 200 OK in 47ms (Views: 1.1ms | ActiveRecord: 8.6ms | Allocations: 13794)


Started GET "/api/v1/transactions/1" for ::1 at 2021-10-24 03:12:55 +0500
  
ActionController::RoutingError (No route matches [GET] "/api/v1/transactions/1"):
  
Started GET "/api/v1/transactions/" for ::1 at 2021-10-24 03:13:03 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.6ms)
Completed 200 OK in 37ms (Views: 26.1ms | ActiveRecord: 9.0ms | Allocations: 15493)


Started GET "/api/v1/transactions/" for ::1 at 2021-10-24 03:13:23 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.64ms)
Completed 200 OK in 35ms (Views: 24.9ms | ActiveRecord: 8.2ms | Allocations: 15500)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:13:50 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
No template found for Api::V1::AccountsController#index, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.0ms | Allocations: 901)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:13:53 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
No template found for Api::V1::AccountsController#index, rendering head :no_content
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 180)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:13:53 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
No template found for Api::V1::AccountsController#index, rendering head :no_content
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 181)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:14:26 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
No serializer found for resource: #<Account id: 1, name: "Account 1", bank_id: 1, current_balance_cents: 0, created_at: "2021-10-23 21:53:07.196232000 +0000", updated_at: "2021-10-23 21:53:07.196232000 +0000">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Account::ActiveRecord_Relation (0.21ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 3.7ms | Allocations: 3824)


Started GET "/api/v1/transactions/" for ::1 at 2021-10-24 03:15:38 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.11ms)
Completed 200 OK in 36ms (Views: 25.8ms | ActiveRecord: 8.1ms | Allocations: 15510)


  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTransaction Load (0.7ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE (created_at > '2021-10-23 22:16:50.351771') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE (created_at > '2021-10-23 22:16:09.240084') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "transactions"."created_at", "transactions"."updated_at" FROM "transactions"[0m
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:18:43 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
No serializer found for resource: #<Account id: 1, name: "Account 1", bank_id: 1, current_balance_cents: 0, created_at: "2021-10-23 21:53:07.196232000 +0000", updated_at: "2021-10-23 21:53:07.196232000 +0000">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Account::ActiveRecord_Relation (0.5ms)
Completed 200 OK in 16ms (Views: 9.4ms | ActiveRecord: 5.0ms | Allocations: 5668)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:18:45 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
No serializer found for resource: #<Account id: 1, name: "Account 1", bank_id: 1, current_balance_cents: 0, created_at: "2021-10-23 21:53:07.196232000 +0000", updated_at: "2021-10-23 21:53:07.196232000 +0000">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Account::ActiveRecord_Relation (0.15ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.3ms | Allocations: 984)


  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) /* loading for inspect */ ORDER BY "transactions"."date_of_transaction" ASC LIMIT $3[0m  [["sender_id", 1], ["recipient_id", 1], ["LIMIT", 11]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2)[0m  [["sender_id", 1], ["recipient_id", 1]]
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3 /* loading for inspect */ ORDER BY "transactions"."date_of_transaction" ASC LIMIT $4[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false], ["LIMIT", 11]]
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) ORDER BY "transactions"."date_of_transaction" ASC LIMIT $3[0m  [["sender_id", 1], ["recipient_id", 1], ["LIMIT", 1]]
  [1m[36mTransaction Update All (0.8ms)[0m  [1m[33mUPDATE "transactions" SET "duplicate" = $1[0m  [["duplicate", false]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "transactions"."duplicate" FROM "transactions"[0m
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 150000], ["updated_at", "2021-10-23 22:19:57.283896"], ["id", 1]]
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:20:15 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
No serializer found for resource: #<Account id: 1, name: "Account 1", bank_id: 1, current_balance_cents: 150000, created_at: "2021-10-23 21:53:07.196232000 +0000", updated_at: "2021-10-23 22:19:57.283896000 +0000">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Account::ActiveRecord_Relation (0.31ms)
Completed 200 OK in 16ms (Views: 10.3ms | ActiveRecord: 4.6ms | Allocations: 5668)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:21:46 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.6ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
No serializer found for resource: #<Account id: 1, name: "Account 1", bank_id: 1, current_balance_cents: 150000, created_at: "2021-10-23 21:53:07.196232000 +0000", updated_at: "2021-10-23 22:19:57.283896000 +0000">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Account::ActiveRecord_Relation (0.2ms)
Completed 200 OK in 25ms (Views: 19.6ms | ActiveRecord: 7.1ms | Allocations: 9822)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:21:57 +0500
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
No serializer found for resource: #<Account id: 1, name: "Account 1", bank_id: 1, current_balance_cents: 150000, created_at: "2021-10-23 21:53:07.196232000 +0000", updated_at: "2021-10-23 22:19:57.283896000 +0000">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Account::ActiveRecord_Relation (0.27ms)
Completed 200 OK in 31ms (Views: 22.5ms | ActiveRecord: 7.1ms | Allocations: 11692)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:22:26 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.16ms)
Completed 200 OK in 22ms (Views: 16.0ms | ActiveRecord: 6.5ms | Allocations: 8130)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:22:39 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.47ms)
Completed 200 OK in 17ms (Views: 12.3ms | ActiveRecord: 6.1ms | Allocations: 7524)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 03:44:27 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 2", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mAccount Create (0.9ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 2"], ["bank_id", 1], ["created_at", "2021-10-23 22:44:27.727738"], ["updated_at", "2021-10-23 22:44:27.727738"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.69ms)
Completed 200 OK in 52ms (Views: 5.7ms | ActiveRecord: 14.9ms | Allocations: 15767)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:45:53 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTransaction Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 22:44:53.089793' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:115:in `check_duplicate'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 2], ["recipient_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:23:in `update_current_balance!'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-23 22:45:53.099385"], ["updated_at", "2021-10-23 22:45:53.099385"]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.62ms)
Completed 200 OK in 63ms (Views: 2.1ms | ActiveRecord: 12.8ms | Allocations: 15082)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:46:28 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>2, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mCACHE Account Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 422 Unprocessable Entity in 22ms (Views: 13.2ms | ActiveRecord: 0.7ms | Allocations: 5372)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:46:38 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.42ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.6ms | Allocations: 2690)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (31.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (144.4ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.6ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.9ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "date_of_transaction" date DEFAULT '2021-10-23' NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-23 22:46:59.277920"], ["updated_at", "2021-10-23 22:46:59.277920"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/banks" for ::1 at 2021-10-24 03:47:09 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BanksController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mBank Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) LIMIT $2[0m  [["name", "Habib Bank"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mBank Create (0.6ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Habib Bank"], ["created_at", "2021-10-23 22:47:09.622781"], ["updated_at", "2021-10-23 22:47:09.622781"]]
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.26ms)
Completed 200 OK in 25ms (Views: 2.0ms | ActiveRecord: 9.4ms | Allocations: 8038)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 03:47:24 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mAccount Create (0.7ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 1"], ["bank_id", 1], ["created_at", "2021-10-23 22:47:24.836745"], ["updated_at", "2021-10-23 22:47:24.836745"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.64ms)
Completed 200 OK in 30ms (Views: 4.4ms | ActiveRecord: 7.0ms | Allocations: 10645)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 03:47:27 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 2", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 2"], ["bank_id", 1], ["created_at", "2021-10-23 22:47:27.260002"], ["updated_at", "2021-10-23 22:47:27.260002"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.27ms)
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 2.7ms | Allocations: 3145)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:47:43 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTransaction Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 22:46:43.382880' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:115:in `check_duplicate'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:23:in `update_current_balance!'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-23 22:47:43.392440"], ["updated_at", "2021-10-23 22:47:43.392440"]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.61ms)
Completed 200 OK in 37ms (Views: 1.7ms | ActiveRecord: 7.1ms | Allocations: 14981)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:47:48 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTransaction Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 22:46:48.848030' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:115:in `check_duplicate'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 2], ["recipient_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:23:in `update_current_balance!'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mTransaction Create (0.8ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-23 22:47:48.853327"], ["updated_at", "2021-10-23 22:47:48.853327"]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.45ms)
Completed 200 OK in 22ms (Views: 1.0ms | ActiveRecord: 5.0ms | Allocations: 6919)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:47:58 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 9ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 3724)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:48:02 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:54:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:54:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 9ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 3434)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:48:09 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.74ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.5ms | Allocations: 2647)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "transactions"."duplicate" FROM "transactions"[0m
Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:50:17 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:55:in `save_with_locks'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:55:in `save_with_locks'
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:55:in `save_with_locks'
  [1m[36mTransaction Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 22:49:17.875196' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:117:in `check_duplicate'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) /* loading for inspect */ ORDER BY "transactions"."date_of_transaction" ASC LIMIT $3[0m  [["sender_id", 1], ["recipient_id", 1], ["LIMIT", 11]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2)[0m  [["sender_id", 1], ["recipient_id", 1]]
  â†³ (byebug):1:in `update_current_balance!'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3 /* loading for inspect */ ORDER BY "transactions"."date_of_transaction" ASC LIMIT $4[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false], ["LIMIT", 11]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  â†³ (byebug):1:in `update_current_balance!'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 200000], ["updated_at", "2021-10-23 22:50:51.543867"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-23 22:50:51.545886"], ["updated_at", "2021-10-23 22:50:51.545886"]]
  â†³ app/models/transaction.rb:55:in `save_with_locks'
  [1m[36mTRANSACTION (6.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:55:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.94ms)
Completed 200 OK in 33748ms (Views: 13.7ms | ActiveRecord: 22.0ms | Allocations: 92973)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:50:56 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.77ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.6ms | Allocations: 3190)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (31.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (71.1ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "date_of_transaction" date DEFAULT '2021-10-23' NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-23 22:51:14.812514"], ["updated_at", "2021-10-23 22:51:14.812514"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/banks" for ::1 at 2021-10-24 03:51:24 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BanksController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mBank Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) LIMIT $2[0m  [["name", "Habib Bank"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mBank Create (0.6ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Habib Bank"], ["created_at", "2021-10-23 22:51:24.628982"], ["updated_at", "2021-10-23 22:51:24.628982"]]
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.27ms)
Completed 200 OK in 26ms (Views: 2.4ms | ActiveRecord: 10.7ms | Allocations: 8037)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 03:51:28 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mAccount Create (0.8ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 1"], ["bank_id", 1], ["created_at", "2021-10-23 22:51:28.071590"], ["updated_at", "2021-10-23 22:51:28.071590"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.8ms)
Completed 200 OK in 33ms (Views: 4.9ms | ActiveRecord: 8.7ms | Allocations: 10645)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 03:51:33 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 2", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 2"], ["bank_id", 1], ["created_at", "2021-10-23 22:51:33.768625"], ["updated_at", "2021-10-23 22:51:33.768625"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.33ms)
Completed 200 OK in 24ms (Views: 0.7ms | ActiveRecord: 2.9ms | Allocations: 3145)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:51:41 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:55:in `save_with_locks'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:55:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:55:in `save_with_locks'
  [1m[36mTransaction Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 22:50:41.959614' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:117:in `check_duplicate'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3 /* loading for inspect */ ORDER BY "transactions"."date_of_transaction" ASC LIMIT $4[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false], ["LIMIT", 11]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-23 22:51:58.291249"], ["updated_at", "2021-10-23 22:51:58.291249"]]
  â†³ app/models/transaction.rb:55:in `save_with_locks'
  [1m[36mTRANSACTION (7.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:55:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (1.09ms)
Completed 200 OK in 16374ms (Views: 2.9ms | ActiveRecord: 15.8ms | Allocations: 76482)


  [1m[36mTransaction Destroy (0.9ms)[0m  [1m[31mDELETE FROM "transactions"[0m
Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:57:28 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 22:56:28.920592' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:128:in `check_duplicate'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-23 22:57:28.923353"], ["updated_at", "2021-10-23 22:57:28.923353"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3 /* loading for inspect */ ORDER BY "transactions"."date_of_transaction" ASC LIMIT $4[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false], ["LIMIT", 11]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 150000], ["updated_at", "2021-10-23 22:57:40.771322"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mTRANSACTION (5.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.61ms)
Completed 200 OK in 11902ms (Views: 1.8ms | ActiveRecord: 15.7ms | Allocations: 32327)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:57:46 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.72ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.6ms | Allocations: 3090)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:58:02 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 22:57:03.007259' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:128:in `check_duplicate'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-23 22:58:03.008711"], ["updated_at", "2021-10-23 22:58:03.008711"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 2], ["recipient_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 50000], ["updated_at", "2021-10-23 22:58:06.608422"], ["id", 2]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.74ms)
Completed 200 OK in 3619ms (Views: 1.9ms | ActiveRecord: 8.6ms | Allocations: 14804)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:58:18 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>5100, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 8ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 3836)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 03:58:23 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>1000, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 22:57:23.543904' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 100000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:128:in `check_duplicate'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 100000], ["created_at", "2021-10-23 22:58:23.545321"], ["updated_at", "2021-10-23 22:58:23.545321"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 1], ["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 300000], ["updated_at", "2021-10-23 22:58:25.673886"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2) AND "transactions"."duplicate" = $3[0m  [["sender_id", 2], ["recipient_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 150000], ["updated_at", "2021-10-23 22:58:27.360919"], ["id", 2]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.97ms)
Completed 200 OK in 3835ms (Views: 2.4ms | ActiveRecord: 10.0ms | Allocations: 19961)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 03:58:31 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.51ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.5ms | Allocations: 1978)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:58:48 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 792)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 03:58:58 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 422 Unprocessable Entity in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 722)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 04:00:42 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 2ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 1052)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 04:00:51 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.97ms)
Completed 200 OK in 48ms (Views: 31.0ms | ActiveRecord: 13.1ms | Allocations: 16921)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 04:01:14 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.04ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.6ms | Allocations: 2503)


  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_id" = $1 AND "transactions"."duplicate" = $2[0m  [["recipient_id", 1], ["duplicate", false]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_id" = $1 AND "transactions"."duplicate" = $2[0m  [["sender_id", 1], ["duplicate", false]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Update (0.7ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", -150000], ["updated_at", "2021-10-23 23:02:39.381997"], ["id", 1]]
  [1m[36mTRANSACTION (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_id" = $1 AND "transactions"."duplicate" = $2[0m  [["recipient_id", 2], ["duplicate", false]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_id" = $1 AND "transactions"."duplicate" = $2[0m  [["sender_id", 2], ["duplicate", false]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/accounts" for ::1 at 2021-10-24 04:02:43 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.66ms)
Completed 200 OK in 17ms (Views: 12.4ms | ActiveRecord: 5.9ms | Allocations: 7611)


  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_id" = $1 AND "transactions"."duplicate" = $2[0m  [["recipient_id", 1], ["duplicate", false]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_id" = $1 AND "transactions"."duplicate" = $2[0m  [["sender_id", 1], ["duplicate", false]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/accounts" for ::1 at 2021-10-24 04:03:23 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.9ms)
Completed 200 OK in 17ms (Views: 13.2ms | ActiveRecord: 6.0ms | Allocations: 7634)


  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."recipient_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["recipient_id", 1], ["LIMIT", 11]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE "transactions"."recipient_id" = $1[0m  [["recipient_id", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE "transactions"."sender_id" = $1[0m  [["sender_id", 1]]
  [1m[36mTransaction Load (1.0ms)[0m  [1m[34mSELECT DISTINCT "transactions".* FROM "transactions" WHERE "transactions"."sender_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sender_id", 1], ["LIMIT", 11]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(DISTINCT "transactions"."id") FROM "transactions" WHERE "transactions"."sender_id" = $1[0m  [["sender_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT DISTINCT "transactions"."amount_cents" FROM "transactions" WHERE "transactions"."sender_id" = $1[0m  [["sender_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_id" = $1 AND "transactions"."duplicate" = $2[0m  [["recipient_id", 1], ["duplicate", false]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_id" = $1 AND "transactions"."duplicate" = $2[0m  [["sender_id", 1], ["duplicate", false]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (7260.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (41.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (157.7ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "banks" CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "date_of_transaction" date DEFAULT '2021-10-23' NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20211023092424)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20211023092350),
(20211023092418);

[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-23 23:05:06.312504"], ["updated_at", "2021-10-23 23:05:06.312504"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "2de2725acba13fc40ef1a27a3243fd2c14458178"], ["created_at", "2021-10-23 23:05:06.320843"], ["updated_at", "2021-10-23 23:05:06.320843"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (9.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "banks" CASCADE[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "date_of_transaction" date DEFAULT '2021-10-23' NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.4ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2021-10-23 23:05:06.392791"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "banks"[0m
Started POST "/api/v1/banks" for ::1 at 2021-10-24 04:05:23 +0500
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BanksController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mBank Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) LIMIT $2[0m  [["name", "Habib Bank"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mBank Create (0.6ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Habib Bank"], ["created_at", "2021-10-23 23:05:23.320662"], ["updated_at", "2021-10-23 23:05:23.320662"]]
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.39ms)
Completed 200 OK in 28ms (Views: 2.3ms | ActiveRecord: 12.7ms | Allocations: 8038)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 04:05:29 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mAccount Create (0.7ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 1"], ["bank_id", 1], ["created_at", "2021-10-23 23:05:29.872519"], ["updated_at", "2021-10-23 23:05:29.872519"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.71ms)
Completed 200 OK in 30ms (Views: 5.7ms | ActiveRecord: 4.6ms | Allocations: 10645)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 04:05:32 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 2", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 2"], ["bank_id", 1], ["created_at", "2021-10-23 23:05:32.500441"], ["updated_at", "2021-10-23 23:05:32.500441"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.29ms)
Completed 200 OK in 25ms (Views: 0.7ms | ActiveRecord: 3.0ms | Allocations: 3148)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 04:05:39 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 23:04:39.364256' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:128:in `check_duplicate'
  [1m[36mTransaction Create (0.8ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-23 23:05:39.366568"], ["updated_at", "2021-10-23 23:05:39.366568"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_id" = $1 AND "transactions"."duplicate" = $2[0m  [["recipient_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:23:in `update_current_balance!'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_id" = $1 AND "transactions"."duplicate" = $2[0m  [["sender_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 50000], ["updated_at", "2021-10-23 23:05:43.841032"], ["id", 2]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mTRANSACTION (5.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (1.0ms)
Completed 200 OK in 4515ms (Views: 3.3ms | ActiveRecord: 14.2ms | Allocations: 65590)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 04:06:04 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 23:05:04.765754' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:128:in `check_duplicate'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-23 23:06:04.768340"], ["updated_at", "2021-10-23 23:06:04.768340"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_id" = $1 AND "transactions"."duplicate" = $2[0m  [["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:23:in `update_current_balance!'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_id" = $1 AND "transactions"."duplicate" = $2[0m  [["sender_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:24:in `update_current_balance!'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", -50000], ["updated_at", "2021-10-23 23:06:08.174161"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_current_balance!'
  [1m[36mTRANSACTION (5.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.58ms)
Completed 200 OK in 3460ms (Views: 1.7ms | ActiveRecord: 17.2ms | Allocations: 26834)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 04:06:19 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>5100, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 9ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 3841)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 04:06:23 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>1000, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 8ms (Views: 0.4ms | ActiveRecord: 0.9ms | Allocations: 3434)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 04:06:31 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.93ms)
Completed 200 OK in 12ms (Views: 10.6ms | ActiveRecord: 0.5ms | Allocations: 3119)


  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/transactions" for ::1 at 2021-10-24 04:09:28 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.6ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" IN ($1, $2)[0m  [["id", 2], ["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.56ms)
Completed 200 OK in 49ms (Views: 34.7ms | ActiveRecord: 10.8ms | Allocations: 20988)


  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."recipient_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["recipient_id", 1], ["LIMIT", 11]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE "transactions"."recipient_id" = $1[0m  [["recipient_id", 1]]
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."sender_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sender_id", 1], ["LIMIT", 11]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE "transactions"."sender_id" = $1[0m  [["sender_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.4ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "development"], ["updated_at", "2021-10-23 23:16:28.514864"], ["key", "environment"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (30.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (62.3ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.0ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (6.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (5.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.7ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "date_of_transaction" date DEFAULT '2021-10-23' NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-23 23:16:31.668677"], ["updated_at", "2021-10-23 23:16:31.668677"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/banks" for ::1 at 2021-10-24 04:16:39 +0500
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BanksController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mBank Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) LIMIT $2[0m  [["name", "Habib Bank"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mBank Create (0.9ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Habib Bank"], ["created_at", "2021-10-23 23:16:39.827155"], ["updated_at", "2021-10-23 23:16:39.827155"]]
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/banks_controller.rb:15:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.28ms)
Completed 200 OK in 25ms (Views: 2.3ms | ActiveRecord: 9.2ms | Allocations: 8037)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 04:16:42 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mAccount Create (0.9ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 1"], ["bank_id", 1], ["created_at", "2021-10-23 23:16:42.846354"], ["updated_at", "2021-10-23 23:16:42.846354"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.73ms)
Completed 200 OK in 31ms (Views: 4.3ms | ActiveRecord: 5.0ms | Allocations: 10521)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 04:16:45 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 2", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 2"], ["bank_id", 1], ["created_at", "2021-10-23 23:16:45.259276"], ["updated_at", "2021-10-23 23:16:45.259276"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:15:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.4ms)
Completed 200 OK in 9ms (Views: 1.1ms | ActiveRecord: 2.7ms | Allocations: 3071)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 04:16:51 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 23:15:51.071879' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:128:in `check_duplicate'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-23 23:16:51.074142"], ["updated_at", "2021-10-23 23:16:51.074142"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 422 Unprocessable Entity in 4431ms (Views: 0.9ms | ActiveRecord: 5.3ms | Allocations: 62033)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 04:17:58 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 23:16:58.324750' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:127:in `check_duplicate'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-23 23:17:58.326935"], ["updated_at", "2021-10-23 23:17:58.326935"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 6101ms (Views: 0.8ms | ActiveRecord: 10.8ms | Allocations: 24824)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 04:18:14 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 23:17:14.841686' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:127:in `check_duplicate'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-23 23:18:14.843525"], ["updated_at", "2021-10-23 23:18:14.843525"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_type" = $1 AND "transactions"."recipient_id" = $2 AND "transactions"."duplicate" = $3[0m  [["recipient_type", "Account"], ["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:26:in `update_current_balance!'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."duplicate" = $3[0m  [["sender_type", "Account"], ["sender_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:27:in `update_current_balance!'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:28:in `update_current_balance!'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 150000], ["updated_at", "2021-10-23 23:18:14.859857"], ["id", 1]]
  â†³ app/models/account.rb:28:in `update_current_balance!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.98ms)
Completed 200 OK in 65ms (Views: 3.7ms | ActiveRecord: 12.2ms | Allocations: 21422)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 04:18:35 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 23:17:35.238698' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:127:in `check_duplicate'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-23 23:18:35.240294"], ["updated_at", "2021-10-23 23:18:35.240294"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_type" = $1 AND "transactions"."recipient_id" = $2 AND "transactions"."duplicate" = $3[0m  [["recipient_type", "Account"], ["recipient_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:26:in `update_current_balance!'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."duplicate" = $3[0m  [["sender_type", "Account"], ["sender_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:27:in `update_current_balance!'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:28:in `update_current_balance!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 50000], ["updated_at", "2021-10-23 23:18:35.246571"], ["id", 2]]
  â†³ app/models/account.rb:28:in `update_current_balance!'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.38ms)
Completed 200 OK in 20ms (Views: 0.9ms | ActiveRecord: 4.6ms | Allocations: 7896)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 04:18:39 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>1000, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[36mTransaction Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-23 23:17:39.843413' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 100000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:127:in `check_duplicate'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 100000], ["created_at", "2021-10-23 23:18:39.844931"], ["updated_at", "2021-10-23 23:18:39.844931"]]
  â†³ app/models/transaction.rb:58:in `save_with_locks'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_type" = $1 AND "transactions"."recipient_id" = $2 AND "transactions"."duplicate" = $3[0m  [["recipient_type", "Account"], ["recipient_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:26:in `update_current_balance!'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."duplicate" = $3[0m  [["sender_type", "Account"], ["sender_id", 1], ["duplicate", false]]
  â†³ app/models/account.rb:27:in `update_current_balance!'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:28:in `update_current_balance!'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 50000], ["updated_at", "2021-10-23 23:18:39.851717"], ["id", 1]]
  â†³ app/models/account.rb:28:in `update_current_balance!'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_type" = $1 AND "transactions"."recipient_id" = $2 AND "transactions"."duplicate" = $3[0m  [["recipient_type", "Account"], ["recipient_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:26:in `update_current_balance!'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."duplicate" = $3[0m  [["sender_type", "Account"], ["sender_id", 2], ["duplicate", false]]
  â†³ app/models/account.rb:27:in `update_current_balance!'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:28:in `update_current_balance!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 150000], ["updated_at", "2021-10-23 23:18:39.858173"], ["id", 2]]
  â†³ app/models/account.rb:28:in `update_current_balance!'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:58:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.41ms)
Completed 200 OK in 27ms (Views: 0.9ms | ActiveRecord: 5.9ms | Allocations: 11056)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 04:18:53 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:10:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.71ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.6ms | Allocations: 3091)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 04:19:10 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.29ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 1.1ms | Allocations: 4130)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.4ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/accounts" for ::1 at 2021-10-24 04:26:30 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.37ms)
Completed 200 OK in 34ms (Views: 24.8ms | ActiveRecord: 8.0ms | Allocations: 12218)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateDelayedJobs (20211023233720)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.7ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" bigserial primary key, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" timestamp, "locked_at" timestamp, "failed_at" timestamp, "locked_by" character varying, "queue" character varying, "created_at" timestamp(6), "updated_at" timestamp(6))[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023233720"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (62.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (195.9ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.1ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "date_of_transaction" date DEFAULT '2021-10-24' NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.5ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDelayedJobs (20211023233720)
  [1m[36mTRANSACTION (11.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" bigserial primary key, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" timestamp, "locked_at" timestamp, "failed_at" timestamp, "locked_by" character varying, "queue" character varying, "created_at" timestamp(6), "updated_at" timestamp(6))[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023233720"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 00:16:51.994953"], ["updated_at", "2021-10-24 00:16:51.994953"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/banks" for ::1 at 2021-10-24 05:18:39 +0500
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BanksController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
  [1m[36mBank Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) LIMIT $2[0m  [["name", "Habib Bank"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
  [1m[36mBank Create (1.2ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Habib Bank"], ["created_at", "2021-10-24 00:18:39.430939"], ["updated_at", "2021-10-24 00:18:39.430939"]]
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/banks_controller.rb:14:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.52ms)
Completed 200 OK in 65ms (Views: 31.1ms | ActiveRecord: 13.3ms | Allocations: 8064)


  [1m[36mBank Load (0.8ms)[0m  [1m[34mSELECT "banks".* FROM "banks" ORDER BY "banks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBank Load (0.7ms)[0m  [1m[34mSELECT "banks".* FROM "banks" ORDER BY "banks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/accounts" for ::1 at 2021-10-24 05:19:08 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mBank Load (6.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mAccount Create (2.1ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 1"], ["bank_id", 1], ["created_at", "2021-10-24 00:19:08.499185"], ["updated_at", "2021-10-24 00:19:08.499185"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mPaperTrail::Version Create (1.8ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 00:19:08.499185"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mTRANSACTION (6.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (1.87ms)
Completed 200 OK in 181ms (Views: 9.8ms | ActiveRecord: 41.4ms | Allocations: 16952)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 05:19:11 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 2", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mAccount Create (0.6ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 2"], ["bank_id", 1], ["created_at", "2021-10-24 00:19:11.386158"], ["updated_at", "2021-10-24 00:19:11.386158"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mPaperTrail::Version Create (0.5ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 00:19:11.386158"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
  [1m[36mTRANSACTION (6.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:14:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.5ms)
Completed 200 OK in 26ms (Views: 1.8ms | ActiveRecord: 8.5ms | Allocations: 4185)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 05:19:15 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 422 Unprocessable Entity in 50ms (Views: 1.0ms | ActiveRecord: 6.0ms | Allocations: 9903)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 05:19:26 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mBank Load (0.6ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mTransaction Exists? (29.4ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 00:18:26.858631' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:118:in `check_duplicate'
  [1m[36mTransaction Create (1.3ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-24 00:19:26.891130"], ["updated_at", "2021-10-24 00:19:26.891130"]]
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (1.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 00:19:26.891130"]]
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mTRANSACTION (6.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:59:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (1.26ms)
Completed 200 OK in 134ms (Views: 3.3ms | ActiveRecord: 57.8ms | Allocations: 20735)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 05:20:16 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mTransaction Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 00:19:16.366936' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:118:in `check_duplicate'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-24 00:20:16.369620"], ["updated_at", "2021-10-24 00:20:16.369620"]]
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.5ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 00:20:16.369620"]]
  â†³ app/models/transaction.rb:59:in `save_with_locks'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:59:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (1.19ms)
Completed 200 OK in 81ms (Views: 4.4ms | ActiveRecord: 17.9ms | Allocations: 20447)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 05:20:49 +0500
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (1.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.6ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (1.9ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2.66ms)
Completed 200 OK in 28ms (Views: 22.2ms | ActiveRecord: 4.1ms | Allocations: 3844)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 05:21:20 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>1000, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:62:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 422 Unprocessable Entity in 105ms (Views: 1.3ms | ActiveRecord: 51.4ms | Allocations: 14515)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 05:21:25 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mTransaction Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 00:20:25.968241' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:121:in `check_duplicate'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:62:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.09ms)
Completed 422 Unprocessable Entity in 19199ms (Views: 11.9ms | ActiveRecord: 6.6ms | Allocations: 129083)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 05:22:27 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mBank Load (1.6ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mAccount Load (1.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mTransaction Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 00:21:31.660190' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:121:in `check_duplicate'
  [1m[36mTransaction Create (2.6ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-24 00:22:31.695125"], ["updated_at", "2021-10-24 00:22:31.695125"]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (2.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 3], ["event", "create"], ["created_at", "2021-10-24 00:22:31.695125"]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mTransaction Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 00:21:37.798308' ) AND "transactions"."id" != $6 LIMIT $7[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:121:in `check_duplicate'
  [1m[36mTransaction Update (0.6ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 00:22:37.802333"], ["id", 3]]
  â†³ app/models/transaction.rb:51:in `complete!'
  [1m[36mPaperTrail::Version Create (0.8ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 3], ["event", "update"], ["object", "---\nid: 3\nsender_type: Bank\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 2\ndate_of_transaction: 2021-10-24\nduplicate: false\npending: true\ndescription: initial transaction\namount_cents: 50000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 00:22:31.695125000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 00:22:31.695125000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 00:22:31.695125000 Z\n"], ["created_at", "2021-10-24 00:22:37.802333"]]
  â†³ app/models/transaction.rb:51:in `complete!'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:62:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 422 Unprocessable Entity in 6912ms (Views: 1.5ms | ActiveRecord: 36.1ms | Allocations: 3774948)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 05:23:33 +0500
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mBank Load (0.9ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mAccount Load (0.8ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mTransaction Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 00:22:34.011373' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:121:in `check_duplicate'
  [1m[36mTransaction Create (1.1ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-24 00:23:34.016760"], ["updated_at", "2021-10-24 00:23:34.016760"]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.9ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 4], ["event", "create"], ["created_at", "2021-10-24 00:23:34.016760"]]
  â†³ app/models/transaction.rb:62:in `save_with_locks'
  [1m[36mTransaction Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 00:22:37.204516' ) AND "transactions"."id" != $6 LIMIT $7[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["amount_cents", 50000], ["id", 4], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:121:in `check_duplicate'
  [1m[36mTransaction Update (0.7ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 00:23:37.246038"], ["id", 4]]
  â†³ app/models/transaction.rb:51:in `complete!'
  [1m[36mPaperTrail::Version Create (0.7ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 4], ["event", "update"], ["object", "---\nid: 4\nsender_type: Bank\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 2\ndate_of_transaction: 2021-10-24\nduplicate: false\npending: true\ndescription: initial transaction\namount_cents: 50000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 00:23:34.016760000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 00:23:34.016760000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 00:23:34.016760000 Z\n"], ["created_at", "2021-10-24 00:23:37.246038"]]
  â†³ app/models/transaction.rb:51:in `complete!'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."recipient_type" = $1 AND "transactions"."recipient_id" = $2 AND "transactions"."duplicate" = $3 AND "transactions"."pending" = $4[0m  [["recipient_type", "Account"], ["recipient_id", 2], ["duplicate", false], ["pending", false]]
  â†³ app/models/account.rb:28:in `update_current_balance!'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."duplicate" = $3 AND "transactions"."pending" = $4[0m  [["sender_type", "Account"], ["sender_id", 2], ["duplicate", false], ["pending", false]]
  â†³ app/models/account.rb:29:in `update_current_balance!'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:30:in `update_current_balance!'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "current_balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["current_balance_cents", 50000], ["updated_at", "2021-10-24 00:23:37.296013"], ["id", 2]]
  â†³ app/models/account.rb:30:in `update_current_balance!'
  [1m[36mPaperTrail::Version Create (0.5ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "update"], ["object", "---\ncurrent_balance_cents: 0\nid: 2\nname: Account 2\nbank_id: 1\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 00:19:11.386158000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 00:19:11.386158000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 00:19:11.386158000 Z\n  zone: *1\n  time: 2021-10-24 00:19:11.386158000 Z\n"], ["created_at", "2021-10-24 00:23:37.296013"]]
  â†³ app/models/account.rb:30:in `update_current_balance!'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:62:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (1.62ms)
Completed 200 OK in 3409ms (Views: 15.8ms | ActiveRecord: 34.5ms | Allocations: 91139)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 05:23:46 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.77ms)
Completed 200 OK in 18ms (Views: 14.4ms | ActiveRecord: 0.9ms | Allocations: 3318)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 05:23:57 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.8ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.8ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2.61ms)
Completed 200 OK in 17ms (Views: 14.0ms | ActiveRecord: 2.1ms | Allocations: 3503)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (27.2ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2021-10-24 13:42:46 +0500
  [1m[35m (7.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 8.1ms | Allocations: 468)
Completed 200 OK in 23ms (Views: 15.8ms | ActiveRecord: 0.0ms | Allocations: 2655)


  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (7.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (119.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (129.8ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.9ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (6.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.7ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 08:57:35.512300"], ["updated_at", "2021-10-24 08:57:35.512300"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (56.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (134.2ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (13.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (6.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (6.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (43.9ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 08:57:40.732280"], ["updated_at", "2021-10-24 08:57:40.732280"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Initialization autoloaded the constant ProcessPendingTransactionsWorker.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ProcessPendingTransactionsWorker, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from instance_exec at /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (43.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (172.9ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.9ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.5ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "current_balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 09:32:40.761672"], ["updated_at", "2021-10-24 09:32:40.761672"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2021-10-24 14:32:46 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 5.9ms | Allocations: 360)
Completed 200 OK in 10ms (Views: 8.3ms | ActiveRecord: 0.0ms | Allocations: 2012)


Started GET "/sidekiq" for ::1 at 2021-10-24 14:32:48 +0500
  
RuntimeError (Sidekiq::Web needs a valid Rack session for CSRF protection. If this is a Rails app,
make sure you mount Sidekiq::Web *inside* your application routes:


Rails.application.routes.draw do
  mount Sidekiq::Web => "/sidekiq"
  ....
end


If this is a Rails app in API mode, you need to enable sessions.

  https://guides.rubyonrails.org/api_app.html#using-session-middlewares

If this is a bare Rack app, use a session middleware before Sidekiq::Web:

  # first, use IRB to create a shared secret key for sessions and commit it
  require 'securerandom'; File.open(".session.key", "w") {|f| f.write(SecureRandom.hex(32)) }

  # now use the secret with a session cookie middleware
  use Rack::Session::Cookie, secret: File.read(".session.key"), same_site: true, max_age: 86400
  run Sidekiq::Web

):
  
sidekiq (6.2.2) lib/sidekiq/web/csrf_protection.rb:69:in `session'
sidekiq (6.2.2) lib/sidekiq/web/csrf_protection.rb:49:in `admit'
sidekiq (6.2.2) lib/sidekiq/web/csrf_protection.rb:41:in `call'
rack (2.2.3) lib/rack/static.rb:161:in `call'
rack (2.2.3) lib/rack/builder.rb:244:in `call'
sidekiq (6.2.2) lib/sidekiq/web.rb:108:in `call'
sidekiq (6.2.2) lib/sidekiq/web.rb:113:in `call'
actionpack (6.1.4.1) lib/action_dispatch/routing/mapper.rb:20:in `block in <class:Constraints>'
actionpack (6.1.4.1) lib/action_dispatch/routing/mapper.rb:49:in `serve'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (6.1.5) lib/bullet/rack.rb:12:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (6.1.4.1) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.4.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.4.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.4.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/host_authorization.rb:98:in `call'
railties (6.1.4.1) lib/rails/engine.rb:539:in `call'
puma (5.5.2) lib/puma/configuration.rb:249:in `call'
puma (5.5.2) lib/puma/request.rb:77:in `block in handle_request'
puma (5.5.2) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.5.2) lib/puma/request.rb:76:in `handle_request'
puma (5.5.2) lib/puma/server.rb:447:in `process_client'
puma (5.5.2) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/sidekiq" for ::1 at 2021-10-24 14:35:20 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/sidekiq/stylesheets/bootstrap.css" for ::1 at 2021-10-24 14:35:20 +0500
Started GET "/sidekiq/javascripts/dashboard.js" for ::1 at 2021-10-24 14:35:20 +0500
Started GET "/sidekiq/stylesheets/application.css" for ::1 at 2021-10-24 14:35:20 +0500
Started GET "/sidekiq/javascripts/application.js" for ::1 at 2021-10-24 14:35:20 +0500
Started GET "/sidekiq/stylesheets/application-dark.css" for ::1 at 2021-10-24 14:35:20 +0500
Started GET "/sidekiq/images/status.png" for ::1 at 2021-10-24 14:35:20 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:35:20 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:35:25 +0500
Started GET "/sidekiq/scheduled" for ::1 at 2021-10-24 14:35:27 +0500
Started GET "/sidekiq/" for ::1 at 2021-10-24 14:35:31 +0500
Started GET "/sidekiq/morgue" for ::1 at 2021-10-24 14:35:34 +0500
Started GET "/sidekiq/scheduled" for ::1 at 2021-10-24 14:35:35 +0500
DEPRECATION WARNING: Initialization autoloaded the constant ProcessPendingTransactionsWorker.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ProcessPendingTransactionsWorker, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from instance_exec at /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32)
Started GET "/sidekiq/scheduled" for ::1 at 2021-10-24 14:37:14 +0500
Started GET "/sidekiq/stylesheets/bootstrap.css" for ::1 at 2021-10-24 14:37:14 +0500
Started GET "/sidekiq/stylesheets/application.css" for ::1 at 2021-10-24 14:37:14 +0500
Started GET "/sidekiq/javascripts/application.js" for ::1 at 2021-10-24 14:37:14 +0500
Started GET "/sidekiq/stylesheets/application-dark.css" for ::1 at 2021-10-24 14:37:14 +0500
Started GET "/sidekiq/images/status.png" for ::1 at 2021-10-24 14:37:14 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:37:15 +0500
Started GET "/sidekiq/scheduled" for ::1 at 2021-10-24 14:37:17 +0500
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/workers/process_pending_transactions_worker.rb:10:in `block in perform'
  [1m[36mTransaction Load (1.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."pending" = $1 AND (transaction_date <= '2021-10-24') ORDER BY "transactions"."id" ASC LIMIT $2[0m  [["pending", true], ["LIMIT", 1000]]
  â†³ app/workers/process_pending_transactions_worker.rb:10:in `block in perform'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/workers/process_pending_transactions_worker.rb:9:in `perform'
DEPRECATION WARNING: Initialization autoloaded the constant ProcessPendingTransactionsWorker.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ProcessPendingTransactionsWorker, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from instance_exec at /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32)
Started GET "/sidekiq" for ::1 at 2021-10-24 14:37:50 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:37:56 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:37:56 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:37:56 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:38:00 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:38:00 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:38:00 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:38:01 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:38:01 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:38:01 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:38:01 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:38:02 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:38:02 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:38:02 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:38:02 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:38:02 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:38:02 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:38:02 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:38:02 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:38:02 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:38:07 +0500
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/workers/process_pending_transactions_worker.rb:10:in `block in perform'
  [1m[36mTransaction Load (0.8ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."pending" = $1 AND (transaction_date <= '2021-10-24') ORDER BY "transactions"."id" ASC LIMIT $2[0m  [["pending", true], ["LIMIT", 1000]]
  â†³ app/workers/process_pending_transactions_worker.rb:10:in `block in perform'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/workers/process_pending_transactions_worker.rb:9:in `perform'
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:38:13 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:38:18 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:38:22 +0500
DEPRECATION WARNING: Initialization autoloaded the constant ProcessPendingTransactionsWorker.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ProcessPendingTransactionsWorker, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from instance_exec at /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32)
Started GET "/" for ::1 at 2021-10-24 14:38:59 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/dev/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 5.4ms | Allocations: 360)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 0.0ms | Allocations: 2012)


Started GET "/sidekiq" for ::1 at 2021-10-24 14:39:01 +0500
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/workers/process_pending_transactions_worker.rb:10:in `block in perform'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/workers/process_pending_transactions_worker.rb:10:in `block in perform'
  [1m[36mTransaction Load (0.9ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."pending" = $1 AND (transaction_date <= '2021-10-24') ORDER BY "transactions"."id" ASC LIMIT $2[0m  [["pending", true], ["LIMIT", 1000]]
  â†³ app/workers/process_pending_transactions_worker.rb:10:in `block in perform'
  [1m[36mTransaction Load (2.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."pending" = $1 AND (transaction_date <= '2021-10-24') ORDER BY "transactions"."id" ASC LIMIT $2[0m  [["pending", true], ["LIMIT", 1000]]
  â†³ app/workers/process_pending_transactions_worker.rb:10:in `block in perform'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/workers/process_pending_transactions_worker.rb:9:in `perform'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/workers/process_pending_transactions_worker.rb:9:in `perform'
Started GET "/sidekiq" for ::1 at 2021-10-24 14:39:03 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:39:03 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:39:03 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:39:04 +0500
Started GET "/sidekiq" for ::1 at 2021-10-24 14:39:04 +0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2021-10-24 14:39:04 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:09 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:14 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:19 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:24 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:30 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:35 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:41 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:44 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:50 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:39:54 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:00 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:05 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:10 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:15 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:20 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:25 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:29 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:35 +0500
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:40 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:44 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:50 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:56 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:40:59 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:04 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:10 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:16 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:20 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:24 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:31 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:34 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:40 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:45 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:50 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:41:56 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:42:01 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:42:05 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:42:09 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
Started GET "/sidekiq/stats" for ::1 at 2021-10-24 14:42:16 +0500
  
ActionController::RoutingError (No route matches [GET] "/sidekiq/stats"):
  
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (36.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (67.7ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 09:45:14.643727"], ["updated_at", "2021-10-24 09:45:14.643727"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/banks" for ::1 at 2021-10-24 15:03:41 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BanksController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/banks_controller.rb:16:in `create'
  [1m[36mBank Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) LIMIT $2[0m  [["name", "Habib Bank"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:16:in `create'
  [1m[36mBank Create (0.7ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Habib Bank"], ["created_at", "2021-10-24 10:03:41.201479"], ["updated_at", "2021-10-24 10:03:41.201479"]]
  â†³ app/controllers/api/v1/banks_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/banks_controller.rb:16:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.28ms)
Completed 200 OK in 33ms (Views: 2.8ms | ActiveRecord: 18.3ms | Allocations: 7238)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 15:03:48 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mBank Load (5.9ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Exists? (17.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Account 1"], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Create (1.2ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 1"], ["bank_id", 1], ["created_at", "2021-10-24 10:03:48.576988"], ["updated_at", "2021-10-24 10:03:48.576988"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mPaperTrail::Version Create (8.1ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 10:03:48.576988"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mTRANSACTION (5.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.65ms)
Completed 200 OK in 107ms (Views: 8.0ms | ActiveRecord: 45.0ms | Allocations: 17634)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 15:03:57 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Account 1"], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 8ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 3953)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 15:04:00 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 2", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Account 2"], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 2"], ["bank_id", 1], ["created_at", "2021-10-24 10:04:00.766199"], ["updated_at", "2021-10-24 10:04:00.766199"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 10:04:00.766199"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.34ms)
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 3.7ms | Allocations: 5089)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 15:04:09 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/application_controller.rb:14:in `message'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/application_controller.rb:14:in `message'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 26ms (Views: 0.7ms | ActiveRecord: 3.1ms | Allocations: 11416)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.3ms)[0m  [1m[35mALTER TABLE "transactions" DROP COLUMN "deleted_at"[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "accounts" DROP COLUMN "deleted_at"[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "banks" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/transactions" for ::1 at 2021-10-24 15:06:03 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mBank Load (0.8ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 422 Unprocessable Entity in 77ms (Views: 1.3ms | ActiveRecord: 11.8ms | Allocations: 25961)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 15:06:48 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "transaction_date"=>"2021-24-10", "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 14ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 4648)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 15:07:09 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "transaction_date"=>"2021-24-10", "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mBank Load (0.7ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 422 Unprocessable Entity in 25038ms (Views: 0.9ms | ActiveRecord: 10.6ms | Allocations: 72351)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 15:07:47 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "transaction_date"=>"2021-10-24", "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mTransaction Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 10:06:47.574048' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:126:in `check_duplicate'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["transaction_date", "2021-10-24"], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-24 10:07:47.580295"], ["updated_at", "2021-10-24 10:07:47.580295"]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.5ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 10:07:47.580295"]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mTransaction Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 10:06:47.595214' ) AND "transactions"."id" != $6 LIMIT $7[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:126:in `check_duplicate'
  [1m[36mTransaction Update (0.3ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 10:07:47.597126"], ["id", 1]]
  â†³ app/models/transaction.rb:51:in `complete!'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 1], ["event", "update"], ["object", "---\nid: 1\nsender_type: Bank\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 1\ntransaction_date: 2021-10-24\nduplicate: false\npending: true\ndescription: initial transaction\namount_cents: 150000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 10:07:47.580295000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 10:07:47.580295000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 10:07:47.580295000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 10:07:47.597126"]]
  â†³ app/models/transaction.rb:51:in `complete!'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."recipient_type" = $1 AND "transactions"."recipient_id" = $2 AND "transactions"."duplicate" = $3 AND "transactions"."pending" = $4[0m  [["recipient_type", "Account"], ["recipient_id", 1], ["duplicate", false], ["pending", false]]
  â†³ app/models/account.rb:32:in `update_balance!'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount_cents") FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."duplicate" = $3 AND "transactions"."pending" = $4[0m  [["sender_type", "Account"], ["sender_id", 1], ["duplicate", false], ["pending", false]]
  â†³ app/models/account.rb:33:in `update_balance!'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:34:in `update_balance!'
  [1m[36mAccount Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 1"], ["id", 1], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:34:in `update_balance!'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 150000], ["updated_at", "2021-10-24 10:07:47.612936"], ["id", 1]]
  â†³ app/models/account.rb:34:in `update_balance!'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "update"], ["object", "---\nbalance_cents: 0\nid: 1\nname: Account 1\nbank_id: 1\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 10:03:48.576988000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 10:03:48.576988000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 10:03:48.576988000 Z\n  zone: *1\n  time: 2021-10-24 10:03:48.576988000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 10:07:47.612936"]]
  â†³ app/models/account.rb:34:in `update_balance!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.9ms)
Completed 200 OK in 91ms (Views: 4.9ms | ActiveRecord: 20.3ms | Allocations: 40898)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 15:07:54 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "transaction_date"=>"2022-10-24", "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mTransaction Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 10:06:54.191493' ) AND "transactions"."id" IS NOT NULL LIMIT $6[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:126:in `check_duplicate'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."amount_cents" = $5 AND (created_at > '2021-10-24 10:06:54.191493' ) AND "transactions"."id" IS NOT NULL[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["amount_cents", 150000]]
  â†³ app/models/transaction.rb:128:in `check_duplicate'
  [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:128:in `block in check_duplicate'
  [1m[36mCACHE Account Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:128:in `block in check_duplicate'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 422 Unprocessable Entity in 18ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 8397)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 15:08:10 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "transaction_date"=>"2020-10-24", "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:61:in `save_with_locks'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:61:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 28ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 4224)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 15:08:18 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "transaction_date"=>"2021-10-24", "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.54ms)
Completed 200 OK in 11ms (Views: 9.2ms | ActiveRecord: 0.9ms | Allocations: 3959)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 15:08:27 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "transaction_date"=>"2021-10-24", "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.7ms)
Completed 200 OK in 8ms (Views: 6.2ms | ActiveRecord: 0.7ms | Allocations: 2877)


  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_id" = $1 AND "transactions"."sender_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["sender_id", 1], ["sender_type", "Account"], ["LIMIT", 11]]
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_id" = $1 AND "transactions"."sender_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["sender_id", 1], ["sender_type", "Account"], ["LIMIT", 11]]
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."deleted_at" IS NULL ORDER BY "banks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_id" = $1 AND "transactions"."sender_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["sender_id", 1], ["sender_type", "Bank"], ["LIMIT", 11]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_id" = $1 AND "transactions"."sender_type" = $2[0m  [["sender_id", 1], ["sender_type", "Bank"]]
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_id" = $1 AND "transactions"."sender_type" = $2 ORDER BY "transactions"."id" ASC LIMIT $3[0m  [["sender_id", 1], ["sender_type", "Bank"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (37.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (79.2ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.4ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.6ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (5.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.6ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "banks" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 11:17:10.785273"], ["updated_at", "2021-10-24 11:17:10.785273"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/accounts" for ::1 at 2021-10-24 16:17:26 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "amount"=>1500, "transaction_date"=>"2021-10-24", "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.69ms)
Completed 200 OK in 9ms (Views: 7.3ms | ActiveRecord: 2.0ms | Allocations: 2797)


Started POST "/api/v1/banks" for ::1 at 2021-10-24 16:17:38 +0500
Processing by Api::V1::BanksController#create as */*
  Parameters: {"bank"=>{"name"=>"Habib Bank"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/banks_controller.rb:16:in `create'
  [1m[36mBank Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) AND "banks"."deleted_at" IS NULL LIMIT $2[0m  [["name", "Habib Bank"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:16:in `create'
  [1m[36mBank Create (0.8ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Habib Bank"], ["created_at", "2021-10-24 11:17:38.184192"], ["updated_at", "2021-10-24 11:17:38.184192"]]
  â†³ app/controllers/api/v1/banks_controller.rb:16:in `create'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/banks_controller.rb:16:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.23ms)
Completed 200 OK in 42ms (Views: 2.3ms | ActiveRecord: 10.7ms | Allocations: 7449)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 16:17:40 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 1", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Account 1"], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Create (1.2ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 1"], ["bank_id", 1], ["created_at", "2021-10-24 11:17:40.788556"], ["updated_at", "2021-10-24 11:17:40.788556"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mPaperTrail::Version Create (0.8ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 11:17:40.788556"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mTRANSACTION (5.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.88ms)
Completed 200 OK in 46ms (Views: 2.4ms | ActiveRecord: 12.6ms | Allocations: 16328)


Started POST "/api/v1/accounts" for ::1 at 2021-10-24 16:17:43 +0500
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Account 2", "bank_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Account 2"], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Account 2"], ["bank_id", 1], ["created_at", "2021-10-24 11:17:43.910694"], ["updated_at", "2021-10-24 11:17:43.910694"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 11:17:43.910694"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (0.37ms)
Completed 200 OK in 15ms (Views: 0.9ms | ActiveRecord: 3.7ms | Allocations: 5334)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 16:18:16 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>1, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>1500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["transaction_date", "2021-10-24"], ["description", "initial transaction"], ["amount_cents", 150000], ["created_at", "2021-10-24 11:18:16.753735"], ["updated_at", "2021-10-24 11:18:16.753735"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 11:18:16.753735"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Update (0.5ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 11:18:16.784191"], ["id", 1]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 1], ["event", "update"], ["object", "---\nid: 1\nsender_type: Bank\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 1\ntransaction_date: 2021-10-24\nduplicate: false\npending: true\ndescription: initial transaction\namount_cents: 150000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 11:18:16.753735000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:18:16.753735000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 11:18:16.753735000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:18:16.784191"]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 1"], ["id", 1], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 150000], ["updated_at", "2021-10-24 11:18:16.793076"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "update"], ["object", "---\nbalance_cents: 0\nbank_id: 1\nid: 1\nname: Account 1\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:40.788556000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:40.788556000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:40.788556000 Z\n  zone: *1\n  time: 2021-10-24 11:17:40.788556000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:18:16.793076"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.88ms)
Completed 200 OK in 99ms (Views: 2.2ms | ActiveRecord: 8.8ms | Allocations: 20340)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 16:19:08 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-24 11:19:08.578117"], ["updated_at", "2021-10-24 11:19:08.578117"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 11:19:08.578117"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Update (0.4ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 11:19:08.582125"], ["id", 2]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 2], ["event", "update"], ["object", "---\nid: 2\nsender_type: Bank\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 2\ntransaction_date: 2021-10-24\nduplicate: false\npending: true\ndescription: initial transaction\namount_cents: 50000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 11:19:08.578117000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:19:08.578117000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 11:19:08.578117000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:08.582125"]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 2"], ["id", 2], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 50000], ["updated_at", "2021-10-24 11:19:08.593985"], ["id", 2]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "update"], ["object", "---\nbalance_cents: 0\nbank_id: 1\nid: 2\nname: Account 2\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:43.910694000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:43.910694000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:43.910694000 Z\n  zone: *1\n  time: 2021-10-24 11:17:43.910694000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:08.593985"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.58ms)
Completed 200 OK in 33ms (Views: 1.6ms | ActiveRecord: 5.6ms | Allocations: 12399)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 16:19:35 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>1000, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (1.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["description", "initial transaction"], ["amount_cents", 100000], ["created_at", "2021-10-24 11:19:35.392577"], ["updated_at", "2021-10-24 11:19:35.392577"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.4ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 3], ["event", "create"], ["created_at", "2021-10-24 11:19:35.392577"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Update (0.6ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 11:19:35.400684"], ["id", 3]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mPaperTrail::Version Create (0.5ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 3], ["event", "update"], ["object", "---\nid: 3\nsender_type: Account\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 2\ntransaction_date: 2021-10-24\nduplicate: false\npending: true\ndescription: initial transaction\namount_cents: 100000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 11:19:35.392577000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:19:35.392577000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 11:19:35.392577000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:35.400684"]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 1"], ["id", 1], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 50000], ["updated_at", "2021-10-24 11:19:35.414626"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.4ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "update"], ["object", "---\nbalance_cents: 150000\nbank_id: 1\nid: 1\nname: Account 1\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:40.788556000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:40.788556000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:18:16.793076000 Z\n  zone: *1\n  time: 2021-10-24 11:18:16.793076000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:35.414626"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 2"], ["id", 2], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.7ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 150000], ["updated_at", "2021-10-24 11:19:35.427321"], ["id", 2]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "update"], ["object", "---\nbalance_cents: 50000\nbank_id: 1\nid: 2\nname: Account 2\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:43.910694000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:43.910694000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:19:08.593985000 Z\n  zone: *1\n  time: 2021-10-24 11:19:08.593985000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:35.427321"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.52ms)
Completed 200 OK in 58ms (Views: 1.1ms | ActiveRecord: 7.9ms | Allocations: 16495)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 16:19:45 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>1000, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 10ms (Views: 0.7ms | ActiveRecord: 1.3ms | Allocations: 4329)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 16:19:55 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["description", "initial transaction"], ["amount_cents", 20000], ["created_at", "2021-10-24 11:19:55.786967"], ["updated_at", "2021-10-24 11:19:55.786967"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 4], ["event", "create"], ["created_at", "2021-10-24 11:19:55.786967"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Update (0.4ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 11:19:55.790561"], ["id", 4]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 4], ["event", "update"], ["object", "---\nid: 4\nsender_type: Account\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 2\ntransaction_date: 2021-10-24\nduplicate: false\npending: true\ndescription: initial transaction\namount_cents: 20000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 11:19:55.786967000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:19:55.786967000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 11:19:55.786967000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:55.790561"]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 1"], ["id", 1], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 30000], ["updated_at", "2021-10-24 11:19:55.801314"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "update"], ["object", "---\nbalance_cents: 50000\nbank_id: 1\nid: 1\nname: Account 1\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:40.788556000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:40.788556000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:19:35.414626000 Z\n  zone: *1\n  time: 2021-10-24 11:19:35.414626000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:55.801314"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 2"], ["id", 2], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 170000], ["updated_at", "2021-10-24 11:19:55.809208"], ["id", 2]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.4ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "update"], ["object", "---\nbalance_cents: 150000\nbank_id: 1\nid: 2\nname: Account 2\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:43.910694000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:43.910694000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:19:35.427321000 Z\n  zone: *1\n  time: 2021-10-24 11:19:35.427321000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:55.809208"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.4ms)
Completed 200 OK in 37ms (Views: 0.9ms | ActiveRecord: 6.7ms | Allocations: 16486)


Started POST "/api/v1/transactions" for ::1 at 2021-10-24 16:19:56 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["description", "initial transaction"], ["amount_cents", 20000], ["created_at", "2021-10-24 11:19:56.405294"], ["updated_at", "2021-10-24 11:19:56.405294"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 5], ["event", "create"], ["created_at", "2021-10-24 11:19:56.405294"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Update (0.3ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 11:19:56.409002"], ["id", 5]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 5], ["event", "update"], ["object", "---\nid: 5\nsender_type: Account\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 2\ntransaction_date: 2021-10-24\nduplicate: false\npending: true\ndescription: initial transaction\namount_cents: 20000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 11:19:56.405294000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:19:56.405294000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 11:19:56.405294000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:56.409002"]]
  â†³ app/models/transaction.rb:50:in `complete!'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 1"], ["id", 1], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 10000], ["updated_at", "2021-10-24 11:19:56.417294"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "update"], ["object", "---\nbalance_cents: 30000\nbank_id: 1\nid: 1\nname: Account 1\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:40.788556000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:40.788556000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:19:55.801314000 Z\n  zone: *1\n  time: 2021-10-24 11:19:55.801314000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:56.417294"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 2"], ["id", 2], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 190000], ["updated_at", "2021-10-24 11:19:56.424354"], ["id", 2]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "update"], ["object", "---\nbalance_cents: 170000\nbank_id: 1\nid: 2\nname: Account 2\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:43.910694000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:43.910694000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:19:55.809208000 Z\n  zone: *1\n  time: 2021-10-24 11:19:55.809208000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:19:56.424354"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.39ms)
Completed 200 OK in 34ms (Views: 0.9ms | ActiveRecord: 5.9ms | Allocations: 16486)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 16:20:08 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.84ms)
Completed 200 OK in 21ms (Views: 19.4ms | ActiveRecord: 0.8ms | Allocations: 4227)


Started GET "/api/v1/transactions/" for ::1 at 2021-10-24 16:20:23 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.22ms)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 1.3ms | Allocations: 5383)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:21:03 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "transaction_id"=>"5"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 422 Unprocessable Entity in 8ms (Views: 1.3ms | ActiveRecord: 4.0ms | Allocations: 2391)


Started GET "/api/v1/transactions/" for ::1 at 2021-10-24 16:21:12 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.7ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2.64ms)
Completed 200 OK in 81ms (Views: 70.5ms | ActiveRecord: 8.8ms | Allocations: 24680)


Started GET "/api/v1/transactions/5" for ::1 at 2021-10-24 16:21:20 +0500
Processing by Api::V1::TransactionsController#show as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:45:in `set_transaction'
No template found for Api::V1::TransactionsController#show, rendering head :no_content
Completed 204 No Content in 5ms (ActiveRecord: 0.3ms | Allocations: 1945)


Started GET "/api/v1/transactions/5" for ::1 at 2021-10-24 16:21:23 +0500
Processing by Api::V1::TransactionsController#show as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:45:in `set_transaction'
No template found for Api::V1::TransactionsController#show, rendering head :no_content
Completed 204 No Content in 3ms (ActiveRecord: 0.3ms | Allocations: 903)


Started GET "/api/v1/transactions/5" for ::1 at 2021-10-24 16:23:30 +0500
Processing by Api::V1::TransactionsController#show as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Class (0.07ms)
Completed 200 OK in 17ms (Views: 2.1ms | ActiveRecord: 3.3ms | Allocations: 7235)


Started GET "/api/v1/transactions/5" for ::1 at 2021-10-24 16:23:33 +0500
Processing by Api::V1::TransactionsController#show as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Class (0.05ms)
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 988)


Started GET "/api/v1/transactions/5" for ::1 at 2021-10-24 16:23:34 +0500
Processing by Api::V1::TransactionsController#show as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Class (0.04ms)
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 986)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "transactions"."id" FROM "transactions" WHERE "transactions"."deleted_at" IS NULL[0m
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Started GET "/api/v1/transactions/5" for ::1 at 2021-10-24 16:24:31 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#show as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (byebug):1:in `set_transaction'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (byebug):1:in `set_transaction'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:48:in `set_transaction'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Class (0.13ms)
Completed 200 OK in 15156ms (Views: 3.3ms | ActiveRecord: 5.4ms | Allocations: 62182)


Started GET "/api/v1/transactions/5" for ::1 at 2021-10-24 16:25:05 +0500
Processing by Api::V1::TransactionsController#show as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
[active_model_serializers]   [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:9:in `sender'
[active_model_serializers]   [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:13:in `recipient'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (19.21ms)
Completed 200 OK in 36ms (Views: 17.2ms | ActiveRecord: 7.5ms | Allocations: 17295)


Started GET "/api/v1/account/1" for ::1 at 2021-10-24 16:25:12 +0500
  
ActionController::RoutingError (No route matches [GET] "/api/v1/account/1"):
  
Started GET "/api/v1/accounts/1" for ::1 at 2021-10-24 16:25:18 +0500
Processing by Api::V1::AccountsController#show as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"1", "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL AND "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:48:in `set_account'
[active_model_serializers]   [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/account_serializer.rb:9:in `bank'
[active_model_serializers] Rendered Api::V1::AccountSerializer with ActiveModelSerializers::Adapter::Attributes (14.24ms)
Completed 200 OK in 18ms (Views: 12.5ms | ActiveRecord: 3.3ms | Allocations: 8117)


Started GET "/api/v1/banks/1" for ::1 at 2021-10-24 16:25:21 +0500
Processing by Api::V1::BanksController#show as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"1", "bank"=>{}}
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."deleted_at" IS NULL AND "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/banks_controller.rb:48:in `set_bank'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Bank (0.28ms)
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 1524)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:25:43 +0500
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "transaction_id"=>"5"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 457)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:25:56 +0500
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "transaction_id"=>"5"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 7478ms (Views: 0.8ms | ActiveRecord: 3.8ms | Allocations: 6017)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:26:58 +0500
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.8ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:48:in `set_transaction'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:55:in `duplicate!'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:55:in `duplicate!'
  [1m[36mTransaction Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > '2021-10-24 11:26:02.698682' ) AND "transactions"."id" != $7 LIMIT $8[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["id", 5], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:58:in `duplicate!'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.88ms)
Completed 200 OK in 3686ms (Views: 4.1ms | ActiveRecord: 9.8ms | Allocations: 70478)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 16:27:22 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
  [1m[36mBank Load (0.4ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.99ms)
Completed 200 OK in 25ms (Views: 19.5ms | ActiveRecord: 5.8ms | Allocations: 11784)


Started GET "/api/v1/transactions" for ::1 at 2021-10-24 16:27:32 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.74ms)
Completed 200 OK in 25ms (Views: 17.7ms | ActiveRecord: 4.4ms | Allocations: 11674)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:28:24 +0500
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (1.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.32ms)
Completed 422 Unprocessable Entity in 25807ms (Views: 23.5ms | ActiveRecord: 4.2ms | Allocations: 76611)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:31:11 +0500
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (1.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mAccount Load (1.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (byebug):1:in `duplicate!'
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mTransaction Load (0.9ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > -636.161206 && created_at <= '2021-10-24 11:19:56.405294') /* loading for inspect */ LIMIT $7[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["LIMIT", 11]]
  â†³ app/models/transaction.rb:56:in `duplicate!'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > -638.615514 && created_at <= '2021-10-24 11:19:56.405294')[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mTransaction Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > -650.578039 && created_at <= '2021-10-24 11:19:56.405294') AND "transactions"."id" != $7 LIMIT $8[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["id", 5], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `duplicate!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 422 Unprocessable Entity in 33982ms (Views: 0.9ms | ActiveRecord: 16.6ms | Allocations: 2038104)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:31:54 +0500
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (byebug):1:in `duplicate!'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > -667.735522 AND created_at <= '2021-10-24 11:19:56.405294')[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mTransaction Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > -684.984362 AND created_at <= '2021-10-24 11:19:56.405294') AND "transactions"."id" != $7 LIMIT $8[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["id", 5], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `duplicate!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 422 Unprocessable Entity in 27177ms (Views: 0.8ms | ActiveRecord: 8.7ms | Allocations: 26678)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:33:30 +0500
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 /* loading for inspect */ LIMIT $7[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["LIMIT", 11]]
  â†³ app/models/transaction.rb:56:in `duplicate!'
  [1m[36mTransaction Load (0.9ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at BETWEEN -774.511085 AND '2021-10-24 11:19:56.405294') /* loading for inspect */ LIMIT $7[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["LIMIT", 11]]
  â†³ app/models/transaction.rb:56:in `duplicate!'
  [1m[36mTransaction Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at BETWEEN -802.957786 AND '2021-10-24 11:19:56.405294') AND "transactions"."id" != $7 LIMIT $8[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["id", 5], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `duplicate!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 422 Unprocessable Entity in 48914ms (Views: 0.8ms | ActiveRecord: 9.6ms | Allocations: 26469)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:35:11 +0500
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.8ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 /* loading for inspect */ LIMIT $7[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["LIMIT", 11]]
  â†³ app/models/transaction.rb:56:in `duplicate!'
  [1m[36mTransaction Load (0.8ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > '2021-10-24 11:18:56.405294' AND created_at <= '2021-10-24 11:19:56.405294') /* loading for inspect */ LIMIT $7[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["LIMIT", 11]]
  â†³ app/models/transaction.rb:56:in `duplicate!'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > '2021-10-24 11:18:56.405294' AND created_at <= '2021-10-24 11:19:56.405294')[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mTransaction Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > '2021-10-24 11:18:56.405294' AND created_at <= '2021-10-24 11:19:56.405294') AND "transactions"."id" != $7 LIMIT $8[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["id", 5], ["LIMIT", 1]]
  â†³ (byebug):1:in `duplicate!'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > '2021-10-24 11:18:56.405294' AND created_at <= '2021-10-24 11:19:56.405294') AND "transactions"."id" != $7 LIMIT $8[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["id", 5], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `duplicate!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.27ms)
Completed 422 Unprocessable Entity in 29955ms (Views: 13.5ms | ActiveRecord: 25.5ms | Allocations: 81852)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:35:55 +0500
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:56:in `duplicate!'
  [1m[36mAccount Load (0.8ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:56:in `duplicate!'
  [1m[36mTransaction Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > '2021-10-24 11:18:56.405294' AND created_at <= '2021-10-24 11:19:56.405294') AND "transactions"."id" != $7 LIMIT $8[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["id", 5], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `duplicate!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 4424ms (Views: 0.6ms | ActiveRecord: 2.1ms | Allocations: 10328)


Started PUT "/api/v1/transactions/5/mark_duplicate" for ::1 at 2021-10-24 16:37:40 +0500
Processing by Api::V1::TransactionsController#mark_duplicate as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "id"=>"5"}
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:56:in `duplicate!'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:56:in `duplicate!'
  [1m[36mTransaction Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."sender_type" = $1 AND "transactions"."sender_id" = $2 AND "transactions"."recipient_type" = $3 AND "transactions"."recipient_id" = $4 AND "transactions"."transaction_date" = $5 AND "transactions"."amount_cents" = $6 AND (created_at > '2021-10-24 11:18:56.405294' AND created_at <= '2021-10-24 11:19:56.405294') AND "transactions"."id" != $7 LIMIT $8[0m  [["sender_type", "Account"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["amount_cents", 20000], ["id", 5], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:59:in `duplicate!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:60:in `duplicate!'
  [1m[36mTransaction Update (0.7ms)[0m  [1m[33mUPDATE "transactions" SET "duplicate" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["duplicate", true], ["updated_at", "2021-10-24 11:37:52.256560"], ["id", 5]]
  â†³ app/models/transaction.rb:60:in `duplicate!'
  [1m[36mPaperTrail::Version Create (0.6ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 5], ["event", "update"], ["object", "---\nid: 5\nsender_type: Account\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 2\ntransaction_date: 2021-10-24\nduplicate: false\npending: false\ndescription: initial transaction\namount_cents: 20000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:19:56.405294000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:19:56.405294000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:19:56.409002000 Z\n  zone: *1\n  time: 2021-10-24 11:19:56.409002000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:37:52.256560"]]
  â†³ app/models/transaction.rb:60:in `duplicate!'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:60:in `duplicate!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mBank Load (1.1ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 1"], ["id", 1], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 30000], ["updated_at", "2021-10-24 11:37:52.300228"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.8ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "update"], ["object", "---\nbalance_cents: 10000\nbank_id: 1\nid: 1\nname: Account 1\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:40.788556000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:40.788556000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:19:56.417294000 Z\n  zone: *1\n  time: 2021-10-24 11:19:56.417294000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:37:52.300228"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Account 2"], ["id", 2], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 170000], ["updated_at", "2021-10-24 11:37:52.311317"], ["id", 2]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "update"], ["object", "---\nbalance_cents: 190000\nbank_id: 1\nid: 2\nname: Account 2\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:17:43.910694000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:17:43.910694000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:19:56.424354000 Z\n  zone: *1\n  time: 2021-10-24 11:19:56.424354000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:37:52.311317"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.89ms)
Completed 200 OK in 11806ms (Views: 4.2ms | ActiveRecord: 22.6ms | Allocations: 49338)


Started GET "/api/v1/accounts" for ::1 at 2021-10-24 16:38:00 +0500
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.77ms)
Completed 200 OK in 9ms (Views: 7.3ms | ActiveRecord: 0.6ms | Allocations: 3475)


Started PUT "/api/v1/transactions/5" for ::1 at 2021-10-24 16:43:14 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#update as */*
  Parameters: {"transaction"=>{"amount"=>300}, "id"=>"5"}
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 422 Unprocessable Entity in 67ms (Views: 1.7ms | ActiveRecord: 9.1ms | Allocations: 22411)


Started PUT "/api/v1/transactions/5" for ::1 at 2021-10-24 16:45:48 +0500
Processing by Api::V1::TransactionsController#update as */*
  Parameters: {"transaction"=>{"amount"=>300}, "id"=>"5"}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 95ms (Views: 0.7ms | ActiveRecord: 7.1ms | Allocations: 19070)


Started PUT "/api/v1/transactions" for ::1 at 2021-10-24 16:45:56 +0500
  
ActionController::RoutingError (No route matches [PUT] "/api/v1/transactions"):
  
Started POST "/api/v1/transactions" for ::1 at 2021-10-24 16:46:24 +0500
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Bank", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-26", "amount"=>500, "description"=>"initial transaction"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mBank Load (0.7ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-26"], ["description", "initial transaction"], ["amount_cents", 50000], ["created_at", "2021-10-24 11:46:24.241791"], ["updated_at", "2021-10-24 11:46:24.241791"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.5ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 6], ["event", "create"], ["created_at", "2021-10-24 11:46:24.241791"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (1.04ms)
Completed 200 OK in 52ms (Views: 4.3ms | ActiveRecord: 9.4ms | Allocations: 19234)


Started PUT "/api/v1/transactions/6" for ::1 at 2021-10-24 16:46:47 +0500
Error occurred while parsing request parameters.
Contents:

{
    "transaction": {
        "amount": 200,
    }
}
Processing by Api::V1::TransactionsController#update as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 334)


Started PUT "/api/v1/transactions/6" for ::1 at 2021-10-24 16:46:53 +0500
Processing by Api::V1::TransactionsController#update as */*
  Parameters: {"transaction"=>{"amount"=>200}, "id"=>"6"}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND "transactions"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:47:in `set_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTransaction Update (0.5ms)[0m  [1m[33mUPDATE "transactions" SET "amount_cents" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["amount_cents", 20000], ["updated_at", "2021-10-24 11:46:53.283423"], ["id", 6]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mPaperTrail::Version Create (0.7ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 6], ["event", "update"], ["object", "---\namount_cents: 50000\npending: true\nsender_id: 1\nsender_type: Bank\nrecipient_id: 2\nrecipient_type: Account\ntransaction_date: 2021-10-26\nid: 6\nduplicate: false\ndescription: initial transaction\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:46:24.241791000 Z\n  zone: &1 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 11:46:24.241791000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: 2021-10-24 11:46:24.241791000 Z\n  zone: *1\n  time: 2021-10-24 11:46:24.241791000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 11:46:53.283423"]]
  â†³ app/models/transaction.rb:71:in `save_with_locks'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/transaction.rb:71:in `save_with_locks'
[active_model_serializers] Rendered Api::V1::TransactionSerializer with ActiveModelSerializers::Adapter::Attributes (0.4ms)
Completed 200 OK in 20ms (Views: 0.9ms | ActiveRecord: 4.6ms | Allocations: 7205)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (35.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (72.4ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "banks" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 12:02:15.467824"], ["updated_at", "2021-10-24 12:02:15.467824"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) AND "banks"."deleted_at" IS NULL LIMIT $2[0m  [["name", "Seed Bank"], ["LIMIT", 1]]
  [1m[36mBank Create (1.1ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Seed Bank"], ["created_at", "2021-10-24 12:02:15.590602"], ["updated_at", "2021-10-24 12:02:15.590602"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.9ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["created_at", "2021-10-24 12:02:15.618589"], ["updated_at", "2021-10-24 12:02:15.618589"]]
  [1m[36mPaperTrail::Version Create (0.7ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 12:02:15.618589"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["created_at", "2021-10-24 12:02:15.637564"], ["updated_at", "2021-10-24 12:02:15.637564"]]
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 12:02:15.637564"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["created_at", "2021-10-24 12:02:15.646661"], ["updated_at", "2021-10-24 12:02:15.646661"]]
  [1m[36mPaperTrail::Version Create (0.4ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 3], ["event", "create"], ["created_at", "2021-10-24 12:02:15.646661"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (33.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (73.7ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "banks" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 12:03:51.756411"], ["updated_at", "2021-10-24 12:03:51.756411"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) AND "banks"."deleted_at" IS NULL LIMIT $2[0m  [["name", "Seed Bank"], ["LIMIT", 1]]
  [1m[36mBank Create (0.6ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Seed Bank"], ["created_at", "2021-10-24 12:03:51.877346"], ["updated_at", "2021-10-24 12:03:51.877346"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.8ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["created_at", "2021-10-24 12:03:51.904543"], ["updated_at", "2021-10-24 12:03:51.904543"]]
  [1m[36mPaperTrail::Version Create (0.7ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 12:03:51.904543"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.6ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["created_at", "2021-10-24 12:03:51.926027"], ["updated_at", "2021-10-24 12:03:51.926027"]]
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 12:03:51.926027"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["created_at", "2021-10-24 12:03:51.936782"], ["updated_at", "2021-10-24 12:03:51.936782"]]
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 3], ["event", "create"], ["created_at", "2021-10-24 12:03:51.936782"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (34.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (89.8ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "banks" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 12:06:37.671970"], ["updated_at", "2021-10-24 12:06:37.671970"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) AND "banks"."deleted_at" IS NULL LIMIT $2[0m  [["name", "Seed Bank"], ["LIMIT", 1]]
  [1m[36mBank Create (0.6ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Seed Bank"], ["created_at", "2021-10-24 12:06:37.788779"], ["updated_at", "2021-10-24 12:06:37.788779"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.9ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["created_at", "2021-10-24 12:06:37.824584"], ["updated_at", "2021-10-24 12:06:37.824584"]]
  [1m[36mPaperTrail::Version Create (0.7ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 12:06:37.824584"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["created_at", "2021-10-24 12:06:37.845272"], ["updated_at", "2021-10-24 12:06:37.845272"]]
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 12:06:37.845272"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["created_at", "2021-10-24 12:06:37.855331"], ["updated_at", "2021-10-24 12:06:37.855331"]]
  [1m[36mPaperTrail::Version Create (0.4ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 3], ["event", "create"], ["created_at", "2021-10-24 12:06:37.855331"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (33.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (74.7ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "banks" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 12:08:29.177555"], ["updated_at", "2021-10-24 12:08:29.177555"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) AND "banks"."deleted_at" IS NULL LIMIT $2[0m  [["name", "Seed Bank"], ["LIMIT", 1]]
  [1m[36mBank Create (0.7ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Seed Bank"], ["created_at", "2021-10-24 12:08:29.301041"], ["updated_at", "2021-10-24 12:08:29.301041"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.8ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["created_at", "2021-10-24 12:08:29.328586"], ["updated_at", "2021-10-24 12:08:29.328586"]]
  [1m[36mPaperTrail::Version Create (0.7ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 12:08:29.328586"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["created_at", "2021-10-24 12:08:29.347699"], ["updated_at", "2021-10-24 12:08:29.347699"]]
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 12:08:29.347699"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["created_at", "2021-10-24 12:08:29.357394"], ["updated_at", "2021-10-24 12:08:29.357394"]]
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 3], ["event", "create"], ["created_at", "2021-10-24 12:08:29.357394"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (43.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (76.6ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "bank_id" bigint NOT NULL, "balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "banks" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-24 12:08:44.324462"], ["updated_at", "2021-10-24 12:08:44.324462"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "banks" WHERE LOWER("banks"."name") = LOWER($1) AND "banks"."deleted_at" IS NULL LIMIT $2[0m  [["name", "Seed Bank"], ["LIMIT", 1]]
  [1m[36mBank Create (0.7ms)[0m  [1m[32mINSERT INTO "banks" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Seed Bank"], ["created_at", "2021-10-24 12:08:44.449725"], ["updated_at", "2021-10-24 12:08:44.449725"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (1.1ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 1"], ["bank_id", 1], ["created_at", "2021-10-24 12:08:44.476959"], ["updated_at", "2021-10-24 12:08:44.476959"]]
  [1m[36mPaperTrail::Version Create (0.7ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 12:08:44.476959"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 2"], ["bank_id", 1], ["created_at", "2021-10-24 12:08:44.497471"], ["updated_at", "2021-10-24 12:08:44.497471"]]
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 12:08:44.497471"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."bank_id" = $2 LIMIT $3[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "bank_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Seed Account 3"], ["bank_id", 1], ["created_at", "2021-10-24 12:08:44.507127"], ["updated_at", "2021-10-24 12:08:44.507127"]]
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 3], ["event", "create"], ["created_at", "2021-10-24 12:08:44.507127"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (1.0ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 1], ["transaction_date", "2021-10-24"], ["description", "Initial balance"], ["amount_cents", 15000000], ["created_at", "2021-10-24 12:08:44.529848"], ["updated_at", "2021-10-24 12:08:44.529848"]]
  [1m[36mPaperTrail::Version Create (0.4ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 1], ["event", "create"], ["created_at", "2021-10-24 12:08:44.529848"]]
  [1m[36mTransaction Update (0.4ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 12:08:44.537866"], ["id", 1]]
  â†³ app/models/transaction.rb:52:in `complete!'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 1], ["event", "update"], ["object", "---\nid: 1\nsender_type: Bank\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 1\ntransaction_date: 2021-10-24\nduplicate: false\npending: true\ndescription: Initial balance\namount_cents: 15000000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 12:08:44.529848000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 12:08:44.529848000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 12:08:44.529848000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 12:08:44.537866"]]
  â†³ app/models/transaction.rb:52:in `complete!'
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Seed Account 1"], ["id", 1], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 15000000], ["updated_at", "2021-10-24 12:08:44.544130"], ["id", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 1], ["event", "update"], ["object", "---\nid: 1\nname: Seed Account 1\nbank_id: 1\nbalance_cents: 0\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 12:08:44.476959000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 12:08:44.476959000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 12:08:44.476959000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 12:08:44.544130"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 2], ["transaction_date", "2021-10-24"], ["description", "Initial balance"], ["amount_cents", 25000000], ["created_at", "2021-10-24 12:08:44.549689"], ["updated_at", "2021-10-24 12:08:44.549689"]]
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 2], ["event", "create"], ["created_at", "2021-10-24 12:08:44.549689"]]
  [1m[36mTransaction Update (0.3ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 12:08:44.554627"], ["id", 2]]
  â†³ app/models/transaction.rb:52:in `complete!'
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 2], ["event", "update"], ["object", "---\nid: 2\nsender_type: Bank\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 2\ntransaction_date: 2021-10-24\nduplicate: false\npending: true\ndescription: Initial balance\namount_cents: 25000000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 12:08:44.549689000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 12:08:44.549689000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 12:08:44.549689000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 12:08:44.554627"]]
  â†³ app/models/transaction.rb:52:in `complete!'
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Seed Account 2"], ["id", 2], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 25000000], ["updated_at", "2021-10-24 12:08:44.560075"], ["id", 2]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 2], ["event", "update"], ["object", "---\nid: 2\nname: Seed Account 2\nbank_id: 1\nbalance_cents: 0\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 12:08:44.497471000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 12:08:44.497471000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 12:08:44.497471000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 12:08:44.560075"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("sender_type", "sender_id", "recipient_type", "recipient_id", "transaction_date", "description", "amount_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["sender_type", "Bank"], ["sender_id", 1], ["recipient_type", "Account"], ["recipient_id", 3], ["transaction_date", "2021-10-24"], ["description", "Initial balance"], ["amount_cents", 35000000], ["created_at", "2021-10-24 12:08:44.565507"], ["updated_at", "2021-10-24 12:08:44.565507"]]
  [1m[36mPaperTrail::Version Create (0.2ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 3], ["event", "create"], ["created_at", "2021-10-24 12:08:44.565507"]]
  [1m[36mTransaction Update (0.3ms)[0m  [1m[33mUPDATE "transactions" SET "pending" = $1, "updated_at" = $2 WHERE "transactions"."id" = $3[0m  [["pending", false], ["updated_at", "2021-10-24 12:08:44.575300"], ["id", 3]]
  â†³ app/models/transaction.rb:52:in `complete!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Transaction"], ["item_id", 3], ["event", "update"], ["object", "---\nid: 3\nsender_type: Bank\nsender_id: 1\nrecipient_type: Account\nrecipient_id: 3\ntransaction_date: 2021-10-24\nduplicate: false\npending: true\ndescription: Initial balance\namount_cents: 35000000\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 12:08:44.565507000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 12:08:44.565507000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 12:08:44.565507000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 12:08:44.575300"]]
  â†³ app/models/transaction.rb:52:in `complete!'
  [1m[36mAccount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "Seed Account 3"], ["id", 3], ["bank_id", 1], ["LIMIT", 1]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mAccount Update (0.3ms)[0m  [1m[33mUPDATE "accounts" SET "balance_cents" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance_cents", 35000000], ["updated_at", "2021-10-24 12:08:44.580724"], ["id", 3]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mPaperTrail::Version Create (0.3ms)[0m  [1m[32mINSERT INTO "versions" ("item_type", "item_id", "event", "object", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["item_type", "Account"], ["item_id", 3], ["event", "update"], ["object", "---\nid: 3\nname: Seed Account 3\nbank_id: 1\nbalance_cents: 0\ncreated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: &1 2021-10-24 12:08:44.507127000 Z\n  zone: &2 !ruby/object:ActiveSupport::TimeZone\n    name: Etc/UTC\n  time: 2021-10-24 12:08:44.507127000 Z\nupdated_at: !ruby/object:ActiveSupport::TimeWithZone\n  utc: *1\n  zone: *2\n  time: 2021-10-24 12:08:44.507127000 Z\ndeleted_at:\n"], ["created_at", "2021-10-24 12:08:44.580724"]]
  â†³ app/models/account.rb:25:in `update_balance_by_amount!'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/accounts" for ::1 at 2021-10-25 16:46:39 +0500
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (14.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
  [1m[36mBank Load (1.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2.77ms)
Completed 200 OK in 233ms (Views: 195.0ms | ActiveRecord: 36.6ms | Allocations: 14185)


  [1m[36mAccount Load (19.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL ORDER BY "accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (7.3ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", "abc"], ["id", 1], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mAccount Update (16.4ms)[0m  [1m[33mUPDATE "accounts" SET "name" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["name", "abc"], ["updated_at", "2021-10-25 12:20:59.827692"], ["id", 1]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE LOWER("accounts"."name") = LOWER($1) AND "accounts"."deleted_at" IS NULL AND "accounts"."id" != $2 AND "accounts"."bank_id" = $3 LIMIT $4[0m  [["name", ""], ["id", 1], ["bank_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[31mROLLBACK[0m
Started GET "/api/v1/accounts" for ::1 at 2021-10-25 17:43:32 +0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AccountsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}, "account"=>{}}
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
  [1m[36mBank Load (0.5ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.7ms)
Completed 200 OK in 122ms (Views: 106.6ms | ActiveRecord: 10.2ms | Allocations: 16244)


Started GET "/api/v1/transactions" for ::1 at 2021-10-25 17:45:00 +0500
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"transaction"=>{"sender_id"=>1, "sender_type"=>"Account", "recipient_id"=>2, "recipient_type"=>"Account", "transaction_date"=>"2021-10-24", "amount"=>200, "description"=>"initial transaction"}}
  [1m[36mTransaction Load (6.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers]   [1m[36mBank Load (0.3ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:9:in `sender'
[active_model_serializers]   [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:13:in `recipient'
[active_model_serializers]   [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:9:in `sender'
[active_model_serializers]   [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:13:in `recipient'
[active_model_serializers]   [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:9:in `sender'
[active_model_serializers]   [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:13:in `recipient'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (69.07ms)
Completed 200 OK in 95ms (Views: 79.5ms | ActiveRecord: 12.9ms | Allocations: 14615)


Started GET "/api/v1/transactions" for ::1 at 2021-10-25 17:45:49 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"search"=>{"account_id"=>1}, "transaction"=>{}}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:11:in `index'
[active_model_serializers]   [1m[36mBank Load (2.1ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:9:in `sender'
[active_model_serializers]   [1m[36mAccount Load (0.8ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:13:in `recipient'
[active_model_serializers]   [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:9:in `sender'
[active_model_serializers]   [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:13:in `recipient'
[active_model_serializers]   [1m[36mCACHE Bank Load (0.0ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:9:in `sender'
[active_model_serializers]   [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/api/v1/transaction_serializer.rb:13:in `recipient'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (22.8ms)
Completed 200 OK in 28ms (Views: 22.5ms | ActiveRecord: 3.9ms | Allocations: 7058)


Started GET "/api/v1/transactions" for ::1 at 2021-10-25 17:46:08 +0500
Processing by Api::V1::TransactionsController#index as */*
  Parameters: {"search_by"=>{"account_id"=>1}, "transaction"=>{}}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND ("transactions"."sender_id" = $1 OR "transactions"."recipient_id" = $2)[0m  [["sender_id", 1], ["recipient_id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:12:in `index'
  [1m[36mBank Load (0.2ms)[0m  [1m[34mSELECT "banks".* FROM "banks" WHERE "banks"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:12:in `index'
  [1m[36mAccount Load (3.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  â†³ app/controllers/api/v1/transactions_controller.rb:12:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.18ms)
Completed 200 OK in 12688ms (Views: 39.7ms | ActiveRecord: 12.2ms | Allocations: 94685)


  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTransaction Load (4.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND (created_at > '2021-10-24 13:11:58.003650' AND created_at <= '2021-10-25 13:11:58.003650') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND (created_at > '2021-10-24 13:11:58.003650' AND created_at <= '2021-10-25 13:11:58.003650') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND (created_at > '2021-10-24 13:11:58.003650' AND created_at <= '2021-10-25 13:11:58.003650') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."deleted_at" IS NULL AND (created_at > '2021-10-23 13:11:58.003650' AND created_at <= '2021-10-25 13:11:58.003650' OR created_at >= '2021-10-25 13:11:58.003650' AND created_at < '2021-10-27 13:11:58.003650') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[35m (1.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (436.5ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (54.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (13.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" citext NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (69.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (218.8ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (9.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (94.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "citext"[0m
  [1m[35m (17.8ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" citext NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (6.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (25.2ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" citext NOT NULL, "bank_id" bigint NOT NULL, "balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "banks" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-25 18:00:26.192203"], ["updated_at", "2021-10-25 18:00:26.192203"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (37.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "banking_app_development"[0m
  [1m[35m (182.4ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE "banking_app_development" ENCODING = 'unicode'[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3875430936132362355)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBanks (20211023092350)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (70.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "citext"[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "banks" ("id" bigserial primary key, "name" citext NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_banks_on_name" ON "banks" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092350"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20211023092418)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" citext NOT NULL, "bank_id" bigint NOT NULL, "balance_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ea11b1ca4"
FOREIGN KEY ("bank_id")
  REFERENCES "banks" ("id")
)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_bank_id" ON "accounts" ("bank_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_name_and_bank_id" ON "accounts" ("name", "bank_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092418"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20211023092424)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "sender_type" character varying NOT NULL, "sender_id" bigint NOT NULL, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "transaction_date" date NOT NULL, "duplicate" boolean DEFAULT FALSE NOT NULL, "pending" boolean DEFAULT TRUE NOT NULL, "description" text DEFAULT '' NOT NULL, "amount_cents" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_sender" ON "transactions" ("sender_type", "sender_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_recipient" ON "transactions" ("recipient_type", "recipient_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023092424"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVersions (20211023232400)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "versions" ("id" bigserial primary key, "item_type" character varying, "{:null=>false}" character varying, "item_id" bigint NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211023232400"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeletedAtToTables (20211024003437)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "accounts" ADD "deleted_at" timestamp[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "transactions" ADD "deleted_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "banks" ADD "deleted_at" timestamp[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211024003437"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-25 18:06:06.217894"], ["updated_at", "2021-10-25 18:06:06.217894"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(3875430936132362355)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
